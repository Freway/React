{"ast":null,"code":"var _jsxFileName = \"C:\\\\Sandbox_Monteiro\\\\Nova pasta\\\\connect-light\\\\src\\\\App.js\";\nimport React, { Component, props } from 'react';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react';\nimport ReactDOM from \"react-dom\";\nimport axios from 'axios';\nimport { Button, FormControl, InputGroup, ListGroup, Alert } from 'react-bootstrap';\nimport * as appSettings from './AppSettings.json';\nimport Moment from 'moment';\nimport 'moment/locale/pt-br';\nimport { Modal } from 'react-bootstrap';\nimport Search from './AutoComplete';\nconst formStyles = {\n  width: '50%',\n  height: '50%',\n  margin: '2% 0% 1% 10%'\n};\nconst headerStyles = {\n  color: '#3399ff',\n  margin: '2% 0% 1% 32%'\n};\nconst mapStyles = {\n  width: '80%',\n  height: '60%',\n  top: '1%',\n  left: '10%',\n  border: '3px solid #3399ff'\n};\nexport class MapContainer extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.toggleButtonState = () => {\n      if (this.optionText.current.value < 1) {\n        alert('Selecione uma opção');\n        return;\n      }\n\n      if (this.data_text_id.current.value.trim() === '') {\n        alert('Insira uma informação para consulta');\n        this.data_text_id.current.value = '';\n        return;\n      }\n\n      if (this.optionText.current.value == 4 && this.textRaio.current.value.trim() === '') {\n        alert('Insira uma informação para consulta');\n        this.textRaio.current.value = '';\n        return;\n      }\n\n      this.doPositioning(this.optionText.current.value, this.data_text_id.current.value, this.textRaio.current.value);\n    };\n\n    this.displayDriver = (option, value) => {\n      this.doPositioning(option, value);\n      this.textInput.current.value = value;\n      this.handleClose();\n    };\n\n    this.doPositioning = (option, value, raio) => {\n      GetEndpoint.getPosition(option, value, raio).then(response => {\n        if (response == null) {\n          alert(\"Não foi possível realizar a pesquisa.\");\n          return;\n        }\n\n        if (response.success && response.data.length > 0) {\n          fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + response.data[0].lat + ',' + response.data[0].long + '&key=' + appSettings.AppSettings.apiKey).then(response => response.json()).then(responseJson => {\n            const address1 = responseJson.results[0].formatted_address;\n            this.setState({\n              posx: {\n                result: response.data[0].lat\n              },\n              posy: {\n                result: response.data[0].long\n              },\n              placa: {\n                result: response.data[0].licencePlate\n              },\n              hour: {\n                result: response.data[0].rowReferenceTime\n              },\n              showRaio: {\n                result: raio\n              },\n              address: {\n                result: address1\n              }\n            });\n          });\n        } else {\n          alert('Informação não encontrada!');\n        }\n      });\n    };\n\n    this.optionChange = () => {\n      this.setState({\n        showSearchName: this.optionText.current.value != 3\n      });\n      this.setState({\n        showRaio: this.optionText.current.value != 4\n      });\n    };\n\n    this.onMarkerClick = (props, marker, e) => {\n      this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true\n      });\n    };\n\n    this.handleClose = () => this.setState({\n      isOpen: false\n    });\n\n    this.handleShow = () => {\n      const promisse = GetEndpoint.getDrivers(this.textInput.current.value).then(response => {\n        if (response == null) {\n          alert(\"Não foi possível realizar a pesquisa.\");\n          return;\n        }\n\n        if (response.success && response.data.length > 0) {\n          this.setState({\n            isOpen: true,\n            drivers: response.data\n          });\n        } else {\n          alert('Informação não encontrada!');\n        }\n      });\n    };\n\n    this.textInput = React.createRef();\n    this.optionText = React.createRef();\n    this.textRaio = React.createRef();\n    this.toggleButtonState = this.toggleButtonState.bind(this);\n    this.state = {\n      posx: {\n        result: -23.4991613\n      },\n      posy: {\n        result: -46.8533796\n      },\n      placa: {\n        result: \"\"\n      },\n      hour: {\n        result: \"\"\n      },\n      address: \"\",\n      selectedPlace: null,\n      activeMarker: null,\n      showingInfoWindow: true,\n      showSearchName: true,\n      isOpen: false,\n      drivers: [],\n      showRaio: true,\n      data_text_id: \"txt_consulta\"\n    };\n  }\n\n  render() {\n    console.log(this.state.posx);\n    let markers = [];\n    markers.push(React.createElement(Marker, {\n      position: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      onClick: this.onMarkerClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }));\n    Moment.locale('pt-BR');\n    return React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: headerStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Connect Light - Visualizador de Frota\"), React.createElement(\"div\", {\n      style: formStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      class: \"custom-select\",\n      id: \"inputGroupSelect04\",\n      ref: this.optionText,\n      onChange: this.optionChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Selecione a op\\xE7\\xE3o...\"), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Placa do Ve\\xEDculo\"), React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Matr\\xEDcula\"), React.createElement(\"option\", {\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Nome do Condutor\"), React.createElement(\"option\", {\n      value: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Endere\\xE7o\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      hidden: this.state.showRaio,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      \"aria-describedby\": \"basic-addon1\",\n      ref: this.textRaio,\n      type: \"number\",\n      min: \"0\",\n      placeholder: \"Raio de Busca\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"input-group-append\",\n      style: {\n        width: \"600px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Search, {\n      op: this.state.option,\n      id: this.state.data_text_id,\n      placeholder: \"Conte\\xFAdo para consulta\",\n      ref: this.textInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: this.handleShow,\n      variant: \"info\",\n      hidden: this.state.showSearchName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Selecionar\"), React.createElement(Button, {\n      onClick: this.toggleButtonState,\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Buscar\"))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(Map, {\n      google: this.props.google,\n      zoom: 15,\n      style: mapStyles,\n      initialCenter: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      center: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, markers, React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, this.state.placa.result), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, this.state.address.result), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Data da \\xDAltima Comunica\\xE7\\xE3o: \", Moment(this.state.hour.result).format('LLL'))))), React.createElement(Modal, {\n      show: this.state.isOpen,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Condutore(s)\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"list-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, this.state.drivers.map(driver => React.createElement(\"li\", {\n      className: \"list-group-item list-group-item-default\",\n      onClick: () => this.displayDriver('3', driver.driverName),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, driver.driverName)))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Fechar\")))), \"}\");\n  }\n\n}\n\nclass GetEndpoint extends Component {\n  static async getToken() {\n    let json = null;\n    await axios.post(appSettings.AppSettings.restUrl + \"Token/Get\", {\n      user: appSettings.AppSettings.user,\n      password: appSettings.AppSettings.password\n    }, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      json = response;\n    }).catch(error => {\n      console.log(error.response);\n\n      try {\n        json = error.response;\n      } catch {\n        json = null;\n      }\n    });\n    return json != null ? json.data : null;\n  }\n\n}\n\nGetEndpoint.getDrivers = async name => {\n  let json = null;\n  let url = appSettings.AppSettings.restUrl + \"Position/GetDriversName\";\n  await axios.post(url + '?name=' + name, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null;\n};\n\nGetEndpoint.getPosition = async (option, search, raio) => {\n  let json = null;\n  let url = \"\";\n\n  switch (option) {\n    case '1':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusLight\";\n      break;\n\n    case '2':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByNationalId\";\n      break;\n\n    case '3':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByDriverName\";\n      break;\n\n    case '4':\n      url = appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\n      break;\n  }\n\n  await axios.post(url, {\n    TokenId: \"\",\n    InputData: [search],\n    RaioData: [raio]\n  }, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null;\n};\n\nexport default GoogleApiWrapper({\n  apiKey: appSettings.AppSettings.apiKey\n})(MapContainer);","map":{"version":3,"sources":["C:\\Sandbox_Monteiro\\Nova pasta\\connect-light\\src\\App.js"],"names":["React","Component","props","Map","GoogleApiWrapper","Marker","InfoWindow","ReactDOM","axios","Button","FormControl","InputGroup","ListGroup","Alert","appSettings","Moment","Modal","Search","formStyles","width","height","margin","headerStyles","color","mapStyles","top","left","border","MapContainer","constructor","toggleButtonState","optionText","current","value","alert","data_text_id","trim","textRaio","doPositioning","displayDriver","option","textInput","handleClose","raio","GetEndpoint","getPosition","then","response","success","data","length","fetch","lat","long","AppSettings","apiKey","json","responseJson","address1","results","formatted_address","setState","posx","result","posy","placa","licencePlate","hour","rowReferenceTime","showRaio","address","optionChange","showSearchName","onMarkerClick","marker","e","selectedPlace","activeMarker","showingInfoWindow","isOpen","handleShow","promisse","getDrivers","drivers","createRef","bind","state","render","console","log","markers","push","lng","locale","google","format","map","driver","driverName","getToken","post","restUrl","user","password","headers","catch","error","name","url","search","TokenId","InputData","RaioData"],"mappings":"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","sourcesContent":["import React, { Component, props } from 'react';\r\nimport { Map, GoogleApiWrapper, Marker, InfoWindow} from 'google-maps-react';\r\nimport ReactDOM from \"react-dom\";\r\nimport axios from 'axios';\r\nimport { Button , FormControl, InputGroup, ListGroup, Alert} from 'react-bootstrap';\r\nimport * as appSettings from './AppSettings.json';\r\nimport Moment from 'moment';\r\nimport 'moment/locale/pt-br'\r\nimport { Modal } from 'react-bootstrap';\r\nimport Search from './AutoComplete'\r\n\r\nconst formStyles  ={\r\n  width: '50%',\r\n  height: '50%',\r\n  margin: '2% 0% 1% 10%'\r\n}\r\n\r\nconst headerStyles  ={\r\n  color: '#3399ff',\r\n  margin: '2% 0% 1% 32%'\r\n}\r\n\r\nconst mapStyles = {\r\n  width: '80%',\r\n  height: '60%',\r\n  top: '1%',\r\n  left: '10%',\r\n  border: '3px solid #3399ff'\r\n};\r\n\r\nexport class MapContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);  \r\n    this.textInput = React.createRef(); \r\n    this.optionText = React.createRef();\r\n    this.textRaio = React.createRef();\r\n    this.toggleButtonState = this.toggleButtonState.bind(this);\r\n    this.state = {  posx : { result: -23.4991613},\r\n                    posy : { result: -46.8533796},\r\n                    placa : { result : \"\"},\r\n                    hour : { result : \"\"},\r\n                    address : \"\",\r\n                    selectedPlace: null,\r\n                    activeMarker: null,\r\n                    showingInfoWindow: true,\r\n                    showSearchName: true,\r\n                    isOpen: false,\r\n                    drivers: [],\r\n                    showRaio: true,\r\n                    data_text_id: \"txt_consulta\"                    \r\n                  }\r\n  }\r\n\r\n  toggleButtonState = () => {\r\n\r\n    if(this.optionText.current.value < 1){\r\n      alert('Selecione uma opção');\r\n      return;\r\n    }\r\n\r\n    if(this.data_text_id.current.value.trim() === ''){\r\n      alert('Insira uma informação para consulta');\r\n      this.data_text_id.current.value = '';\r\n      return;\r\n    }\r\n\r\n    if(this.optionText.current.value == 4 && this.textRaio.current.value.trim() === ''){\r\n      alert('Insira uma informação para consulta');\r\n      this.textRaio.current.value = '' ;\r\n      return;\r\n    }\r\n    \r\n    this.doPositioning(this.optionText.current.value, this.data_text_id.current.value,this.textRaio.current.value);\r\n  };  \r\n\r\n  displayDriver = (option, value) => {\r\n    this.doPositioning(option, value);\r\n    this.textInput.current.value = value;\r\n\r\n    this.handleClose();\r\n  }\r\n\r\n\r\n  doPositioning = (option, value, raio) => {\r\n\r\n     GetEndpoint.getPosition(option, value, raio).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n      if(response.success && response.data.length > 0){       \r\n        fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + response.data[0].lat + ',' + response.data[0].long + '&key=' + appSettings.AppSettings.apiKey)\r\n          .then((response) => response.json())\r\n          .then((responseJson) => {\r\n            const address1 = responseJson.results[0].formatted_address;\r\n              this.setState({\r\n                posx : { result: response.data[0].lat},\r\n                posy : { result: response.data[0].long},\r\n                placa : { result: response.data[0].licencePlate},\r\n                hour: { result: response.data[0].rowReferenceTime},\r\n                showRaio: {result: raio},\r\n                address : {result: address1}\r\n              }) \r\n        })\r\n      }\r\n\r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    });\r\n  }\r\n\r\n  optionChange = () => {\r\n    this.setState({\r\n      showSearchName: this.optionText.current.value != 3\r\n    });\r\n\r\n    this.setState({\r\n      showRaio: this.optionText.current.value != 4,\r\n\r\n     });\r\n\r\n  }\r\n\r\n  onMarkerClick = (props, marker, e) => {\r\n    this.setState({\r\n      selectedPlace: props,\r\n      activeMarker: marker,\r\n      showingInfoWindow: true\r\n    });\r\n  };\r\n\r\n  handleClose = () => this.setState({\r\n    isOpen: false\r\n  });\r\n\r\n  handleShow = () => {\r\n    const promisse = GetEndpoint.getDrivers(this.textInput.current.value).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n      if(response.success && response.data.length > 0){\r\n        this.setState({\r\n          isOpen: true,\r\n          drivers: response.data\r\n        });\r\n    \r\n      }\r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    });    \r\n  }\r\n\r\n  render() {\r\n\r\n    console.log(this.state.posx)\r\n\r\n    let markers = [];\r\n\r\n    markers.push(<Marker position={{lat: this.state.posx.result, lng: this.state.posy.result}} onClick={this.onMarkerClick}/>)\r\n\r\n    Moment.locale('pt-BR');\r\n\r\n    return (\r\n      <form>\r\n        <h2 style={headerStyles}>Connect Light - Visualizador de Frota</h2>\r\n\r\n        <div style={formStyles}>\r\n          <InputGroup className=\"mb-6\">\r\n            <div class=\"input-group\">\r\n              <div  style={{width: `200px`}}>\r\n              <select class=\"custom-select\" id=\"inputGroupSelect04\" ref={this.optionText} onChange={this.optionChange} >\r\n                <option value=\"0\" selected>Selecione a opção...</option>\r\n                <option value=\"1\">Placa do Veículo</option>\r\n                <option value=\"2\">Matrícula</option>\r\n                <option value=\"3\">Nome do Condutor</option>\r\n                <option value=\"4\">Endereço</option>\r\n              </select>\r\n              </div>\r\n                 <div>\r\n    <label hidden={this.state.showRaio}>\r\n    <FormControl aria-describedby=\"basic-addon1\"ref={this.textRaio}type=\"number\" min=\"0\" placeholder=\"Raio de Busca\"/>\r\n    </label>\r\n    </div>\r\n              <div class=\"input-group-append\" style={{width: `600px`}}> \r\n              \r\n                {/* <FormControl id={this.state.data_text_id} aria-describedby=\"basic-addon1\" ref={this.textInput} placeholder=\"Conteúdo para consulta\"/>*/}\r\n                 \r\n                <Search           \r\n                  op={this.state.option}     \r\n                  id={this.state.data_text_id}\r\n                  placeholder=\"Conteúdo para consulta\"\r\n                  ref={this.textInput}\r\n                />                \r\n                \r\n\r\n                <Button onClick={this.handleShow} variant=\"info\" hidden={this.state.showSearchName} >Selecionar</Button>\r\n                <Button onClick={this.toggleButtonState} variant=\"primary\">Buscar</Button>\r\n              </div>\r\n            </div>\r\n          </InputGroup>\r\n        </div>\r\n\r\n        <div>\r\n       \r\n          <Map\r\n            google={this.props.google}\r\n            zoom={15}\r\n            style={mapStyles}\r\n            initialCenter={{\r\n              lat: this.state.posx.result,\r\n              lng: this.state.posy.result}}\r\n            center={{\r\n                lat: this.state.posx.result,\r\n                lng: this.state.posy.result}}\r\n          >\r\n              \r\n            {markers}\r\n        \r\n            <InfoWindow\r\n              marker={this.state.activeMarker}\r\n              visible={this.state.showingInfoWindow}>\r\n                <div>\r\n                  <h4>{this.state.placa.result}</h4>\r\n                  <h5>{this.state.address.result}</h5>\r\n                  <h6>Data da Última Comunicação: {Moment(this.state.hour.result).format('LLL') }</h6>\r\n                </div>\r\n            </InfoWindow>        \r\n          </Map>        \r\n  \r\n          <Modal show={this.state.isOpen} onHide={this.handleClose}>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Condutore(s)</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <div>\r\n                <React.Fragment>\r\n                  <ul className=\"list-group\">\r\n                    {this.state.drivers.map(driver => (\r\n                      <li className=\"list-group-item list-group-item-default\" onClick={() => this.displayDriver('3', driver.driverName)}>\r\n                        {driver.driverName} \r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </React.Fragment>              \r\n              </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                Fechar\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>          \r\n        </div>\r\n        }\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nclass GetEndpoint extends Component {\r\n\r\n  static async getToken() { \r\n    let json = null;\r\n    \r\n    await axios.post(appSettings.AppSettings.restUrl + \"Token/Get\", {\r\n      user: appSettings.AppSettings.user,\r\n      password: appSettings.AppSettings.password,\r\n    }, \r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n        json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n  };\r\n\r\n   static getDrivers = async (name) => {\r\n\r\n     let json = null;\r\n\r\n     let url = appSettings.AppSettings.restUrl + \"Position/GetDriversName\";\r\n\r\n     await axios.post(url + '?name=' + name,\r\n     {\r\n       headers: {\r\n         'Accept': 'application/json',\r\n         'Content-Type': 'application/json',\r\n       },\r\n       }).then(response => {\r\n         json = response;\r\n       }).catch(error => {\r\n         console.log(error.response);\r\n       try {\r\n         json = error.response;\r\n       } catch {\r\n        json = null\r\n       }\r\n     });\r\n     return json != null ? json.data : null;\r\n   };   \r\n  \r\n  static getPosition = async (option, search, raio) => {\r\n  \r\n    let json = null;\r\n\r\n    let url = \"\";\r\n\r\n    switch(option) {\r\n      case '1':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusLight\";\r\n        break;\r\n      case '2':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByNationalId\";\r\n        break;\r\n      case '3':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByDriverName\";\r\n        break;\r\n      case '4':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\r\n        break;\r\n    }\r\n\r\n    await axios.post(url, {\r\n           TokenId: \"\",\r\n           InputData: [search],\r\n           RaioData: [raio]\r\n         },\r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response;\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n       json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n   };\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: appSettings.AppSettings.apiKey\r\n})(MapContainer);\r\n\r\n"]},"metadata":{},"sourceType":"module"}