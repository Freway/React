{"ast":null,"code":"var _jsxFileName = \"C:\\\\Sandbox_Monteiro\\\\Nova pasta\\\\connect-light\\\\src\\\\App.js\";\nimport React, { Component, props } from 'react';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react';\nimport ReactDOM from \"react-dom\";\nimport axios from 'axios';\nimport { Button, FormControl, InputGroup, ListGroup, Alert } from 'react-bootstrap';\nimport * as appSettings from './AppSettings.json';\nimport Moment from 'moment';\nimport 'moment/locale/pt-br';\nimport { Modal } from 'react-bootstrap';\nconst formStyles = {\n  width: '50%',\n  height: '50%',\n  margin: '2% 0% 1% 10%'\n};\nconst headerStyles = {\n  color: '#3399ff',\n  margin: '2% 0% 1% 32%'\n};\nconst mapStyles = {\n  width: '80%',\n  height: '60%',\n  top: '1%',\n  left: '10%',\n  border: '3px solid #3399ff'\n};\nexport class MapContainer extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.toggleButtonState = () => {\n      if (this.optionText.current.value < 1) {\n        alert('Selecione uma opção');\n        return;\n      }\n\n      if (this.textInput.current.value.trim() === '') {\n        alert('Insira uma informação para consulta');\n        this.textInput.current.value = '';\n        return;\n      }\n\n      if (this.optionText.current.value == 4 && this.textRaio.current.value.trim() === '') {\n        alert('Insira uma informação para consulta');\n        this.textRaio.current.value = '';\n        return;\n      }\n\n      this.doPositioning(this.optionText.current.value, this.textInput.current.value, this.textRaio.current.value);\n    };\n\n    this.displayDriver = (option, value) => {\n      this.doPositioning(option, value);\n      this.textInput.current.value = value;\n      this.handleClose();\n    };\n\n    this.doPositioning = (option, value, raio) => {\n      if (option == 4) {\n        const promisse = GetEndpoint.getPosition(option, value, raio).then(response => {\n          fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + value + '&key=' + appSettings.AppSettings.apiKey).then(response => response.json()).then(responseJson => {\n            this.setState({\n              // posx: {result: response.location.lat},\n              posx: {\n                result: response.data[0].lat\n              },\n              posy: {\n                result: response.data[0].long\n              },\n              showRaio: {\n                result: raio\n              }\n            });\n          });\n        });\n      } else {\n        const promisse = GetEndpoint.getPosition(option, value, raio).then(response => {\n          if (response == null) {\n            alert(\"Não foi possível realizar a pesquisa.\");\n            return;\n          }\n\n          if (response.success && response.data.length > 0) {\n            fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + response.data[0].lat + ',' + response.data[0].long + '&key=' + appSettings.AppSettings.apiKey).then(response => response.json()).then(responseJson => {\n              const address1 = responseJson.results[0].formatted_address;\n              this.setState({\n                posx: {\n                  result: response.data[0].lat\n                },\n                posy: {\n                  result: response.data[0].long\n                },\n                placa: {\n                  result: response.data[0].licencePlate\n                },\n                hour: {\n                  result: response.data[0].rowReferenceTime\n                },\n                showRaio: {\n                  result: raio\n                },\n                address: {\n                  result: address1\n                }\n              });\n            });\n          } else {\n            alert('Informação não encontrada!');\n          }\n        });\n      }\n\n      ;\n    };\n\n    this.optionChange = () => {\n      this.setState({\n        showSearchName: this.optionText.current.value != 3\n      });\n      this.setState({\n        showRaio: this.optionText.current.value != 4\n      });\n    };\n\n    this.onMarkerClick = (props, marker, e) => {\n      this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true\n      });\n    };\n\n    this.handleClose = () => this.setState({\n      isOpen: false\n    });\n\n    this.handleShow = () => {\n      const promisse = GetEndpoint.getDrivers(this.textInput.current.value).then(response => {\n        if (response == null) {\n          alert(\"Não foi possível realizar a pesquisa.\");\n          return;\n        }\n\n        if (response.success && response.data.length > 0) {\n          this.setState({\n            isOpen: true,\n            drivers: response.data\n          });\n        } else {\n          alert('Informação não encontrada!');\n        }\n      });\n    };\n\n    this.textInput = React.createRef();\n    this.optionText = React.createRef();\n    this.textRaio = React.createRef();\n    this.toggleButtonState = this.toggleButtonState.bind(this);\n    this.state = {\n      posx: {\n        result: -23.4991613\n      },\n      posy: {\n        result: -46.8533796\n      },\n      placa: {\n        result: \"\"\n      },\n      hour: {\n        result: \"\"\n      },\n      address: \"\",\n      selectedPlace: null,\n      activeMarker: null,\n      showingInfoWindow: true,\n      showSearchName: true,\n      isOpen: false,\n      drivers: [],\n      showRaio: true\n    };\n  }\n\n  render() {\n    console.log(this.state.posx);\n    let markers = [];\n    markers.push(React.createElement(Marker, {\n      position: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      onClick: this.onMarkerClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }));\n    Moment.locale('pt-BR');\n    return React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: headerStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Connect Light - Visualizador de Frota\"), React.createElement(\"div\", {\n      style: formStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      class: \"custom-select\",\n      id: \"inputGroupSelect04\",\n      ref: this.optionText,\n      onChange: this.optionChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Selecione a op\\xE7\\xE3o...\"), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Placa do Ve\\xEDculo\"), React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Matr\\xEDcula\"), React.createElement(\"option\", {\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Nome do Condutor\"), React.createElement(\"option\", {\n      value: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Endere\\xE7o\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      hidden: this.state.showRaio,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      \"aria-describedby\": \"basic-addon1\",\n      ref: this.textRaio,\n      type: \"number\",\n      min: \"0\",\n      placeholder: \"Raio de Busca\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"input-group-append\",\n      style: {\n        width: \"600px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      \"aria-describedby\": \"basic-addon1\",\n      ref: this.textInput,\n      placeholder: \"Conte\\xFAdo para consulta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: this.handleShow,\n      variant: \"info\",\n      hidden: this.state.showSearchName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Selecionar\"), React.createElement(Button, {\n      onClick: this.toggleButtonState,\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Buscar\"))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Map, {\n      google: this.props.google,\n      zoom: 15,\n      style: mapStyles,\n      initialCenter: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      center: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, markers, React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, this.state.placa.result), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, this.state.address.result), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Data da \\xDAltima Comunica\\xE7\\xE3o: \", Moment(this.state.hour.result).format('LLL'))))), React.createElement(Modal, {\n      show: this.state.isOpen,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Condutore(s)\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"list-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, this.state.drivers.map(driver => React.createElement(\"li\", {\n      className: \"list-group-item list-group-item-default\",\n      onClick: () => this.displayDriver('3', driver.driverName),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, driver.driverName)))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Fechar\")))), \"}\");\n  }\n\n}\n\nclass GetEndpoint extends Component {\n  static async getToken() {\n    let json = null;\n    await axios.post(appSettings.AppSettings.restUrl + \"Token/Get\", {\n      user: appSettings.AppSettings.user,\n      password: appSettings.AppSettings.password\n    }, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      json = response;\n    }).catch(error => {\n      console.log(error.response);\n\n      try {\n        json = error.response;\n      } catch {\n        json = null;\n      }\n    });\n    return json != null ? json.data : null;\n  }\n\n}\n\nGetEndpoint.getDrivers = async name => {\n  let json = null;\n  let url = appSettings.AppSettings.restUrl + \"Position/GetDriversName\";\n  await axios.post(url + '?name=' + name, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null;\n};\n\nGetEndpoint.getPosition = async (option, search, raio) => {\n  let json = null;\n  let url = \"\";\n\n  switch (option) {\n    case '1':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusLight\";\n      break;\n\n    case '2':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByNationalId\";\n      break;\n\n    case '3':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByDriverName\";\n      break;\n\n    case '4':\n      url = appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\n      break;\n  }\n\n  await axios.post(url, {\n    TokenId: \"\",\n    InputData: [search],\n    RaioData: [raio]\n  }, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null;\n};\n\nexport default GoogleApiWrapper({\n  apiKey: appSettings.AppSettings.apiKey\n})(MapContainer);","map":{"version":3,"sources":["C:\\Sandbox_Monteiro\\Nova pasta\\connect-light\\src\\App.js"],"names":["React","Component","props","Map","GoogleApiWrapper","Marker","InfoWindow","ReactDOM","axios","Button","FormControl","InputGroup","ListGroup","Alert","appSettings","Moment","Modal","formStyles","width","height","margin","headerStyles","color","mapStyles","top","left","border","MapContainer","constructor","toggleButtonState","optionText","current","value","alert","textInput","trim","textRaio","doPositioning","displayDriver","option","handleClose","raio","promisse","GetEndpoint","getPosition","then","response","fetch","AppSettings","apiKey","json","responseJson","setState","posx","result","data","lat","posy","long","showRaio","success","length","address1","results","formatted_address","placa","licencePlate","hour","rowReferenceTime","address","optionChange","showSearchName","onMarkerClick","marker","e","selectedPlace","activeMarker","showingInfoWindow","isOpen","handleShow","getDrivers","drivers","createRef","bind","state","render","console","log","markers","push","lng","locale","google","format","map","driver","driverName","getToken","post","restUrl","user","password","headers","catch","error","name","url","search","TokenId","InputData","RaioData"],"mappings":"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","sourcesContent":["import React, { Component, props } from 'react';\r\nimport { Map, GoogleApiWrapper, Marker, InfoWindow} from 'google-maps-react';\r\nimport ReactDOM from \"react-dom\";\r\nimport axios from 'axios';\r\nimport { Button , FormControl, InputGroup, ListGroup, Alert} from 'react-bootstrap';\r\nimport * as appSettings from './AppSettings.json';\r\nimport Moment from 'moment';\r\nimport 'moment/locale/pt-br'\r\nimport { Modal } from 'react-bootstrap';\r\n\r\nconst formStyles  ={\r\n  width: '50%',\r\n  height: '50%',\r\n  margin: '2% 0% 1% 10%'\r\n}\r\n\r\nconst headerStyles  ={\r\n  color: '#3399ff',\r\n  margin: '2% 0% 1% 32%'\r\n}\r\n\r\nconst mapStyles = {\r\n  width: '80%',\r\n  height: '60%',\r\n  top: '1%',\r\n  left: '10%',\r\n  border: '3px solid #3399ff'\r\n};\r\n\r\nexport class MapContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);  \r\n    this.textInput = React.createRef(); \r\n    this.optionText = React.createRef();\r\n    this.textRaio = React.createRef();\r\n    this.toggleButtonState = this.toggleButtonState.bind(this);\r\n    this.state = {  posx : { result: -23.4991613},\r\n                    posy : { result: -46.8533796},\r\n                    placa : { result : \"\"},\r\n                    hour : { result : \"\"},\r\n                    address : \"\",\r\n                    selectedPlace: null,\r\n                    activeMarker: null,\r\n                    showingInfoWindow: true,\r\n                    showSearchName: true,\r\n                    isOpen: false,\r\n                    drivers: [],\r\n                    showRaio: true                    \r\n                  }\r\n  }\r\n\r\n  toggleButtonState = () => {\r\n\r\n    if(this.optionText.current.value < 1){\r\n      alert('Selecione uma opção');\r\n      return;\r\n    }\r\n\r\n    if(this.textInput.current.value.trim() === ''){\r\n      alert('Insira uma informação para consulta');\r\n      this.textInput.current.value = '';\r\n      return;\r\n    }\r\n\r\n    if(this.optionText.current.value == 4 && this.textRaio.current.value.trim() === ''){\r\n      alert('Insira uma informação para consulta');\r\n      this.textRaio.current.value = '' ;\r\n      return;\r\n    }\r\n    \r\n    this.doPositioning(this.optionText.current.value, this.textInput.current.value,this.textRaio.current.value);\r\n  };  \r\n\r\n  displayDriver = (option, value) => {\r\n    this.doPositioning(option, value);\r\n    this.textInput.current.value = value;\r\n\r\n    this.handleClose();\r\n  }\r\n\r\n\r\n  doPositioning = (option, value, raio) => {\r\n\r\n    if (option == 4){\r\n    const promisse = GetEndpoint.getPosition(option, value, raio).then( response => {      \r\n        fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + value + '&key=' + appSettings.AppSettings.apiKey)\r\n            .then((response) => response.json())\r\n            .then((responseJson) => {\r\n              this.setState({\r\n               // posx: {result: response.location.lat},\r\n                posx : { result: response.data[0].lat},\r\n                posy : { result: response.data[0].long},\r\n                showRaio: {result: raio}\r\n      })})\r\n    })}\r\n    else{\r\n    const promisse = GetEndpoint.getPosition(option, value, raio).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n\r\n      if(response.success && response.data.length > 0){       \r\n        fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + response.data[0].lat + ',' + response.data[0].long + '&key=' + appSettings.AppSettings.apiKey)\r\n          .then((response) => response.json())\r\n          .then((responseJson) => {\r\n            const address1 = responseJson.results[0].formatted_address;\r\n              this.setState({\r\n                posx : { result: response.data[0].lat},\r\n                posy : { result: response.data[0].long},\r\n                placa : { result: response.data[0].licencePlate},\r\n                hour: { result: response.data[0].rowReferenceTime},\r\n                showRaio: {result: raio},\r\n                address : {result: address1}\r\n              })\r\n      \r\n        })\r\n      }\r\n\r\n      \r\n      \r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    })};\r\n  }\r\n\r\n  optionChange = () => {\r\n    this.setState({\r\n      showSearchName: this.optionText.current.value != 3\r\n    });\r\n \r\n    this.setState({\r\n      showRaio: this.optionText.current.value != 4 \r\n    });\r\n\r\n  }\r\n\r\n  onMarkerClick = (props, marker, e) => {\r\n    this.setState({\r\n      selectedPlace: props,\r\n      activeMarker: marker,\r\n      showingInfoWindow: true\r\n    });\r\n  };\r\n\r\n  handleClose = () => this.setState({\r\n    isOpen: false\r\n  });\r\n\r\n  handleShow = () => {\r\n    const promisse = GetEndpoint.getDrivers(this.textInput.current.value).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n      if(response.success && response.data.length > 0){\r\n        this.setState({\r\n          isOpen: true,\r\n          drivers: response.data\r\n        });\r\n    \r\n      }\r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    });    \r\n  }\r\n\r\n  render() {\r\n\r\n    console.log(this.state.posx)\r\n\r\n    let markers = [];\r\n\r\n    markers.push(<Marker position={{lat: this.state.posx.result, lng: this.state.posy.result}} onClick={this.onMarkerClick}/>)\r\n\r\n    Moment.locale('pt-BR');\r\n\r\n    return (\r\n      <form>\r\n        <h2 style={headerStyles}>Connect Light - Visualizador de Frota</h2>\r\n\r\n        <div style={formStyles}>\r\n          <InputGroup className=\"mb-6\">\r\n            <div class=\"input-group\">\r\n              <div  style={{width: `200px`}}>\r\n              <select class=\"custom-select\" id=\"inputGroupSelect04\" ref={this.optionText} onChange={this.optionChange} >\r\n                <option value=\"0\" selected>Selecione a opção...</option>\r\n                <option value=\"1\">Placa do Veículo</option>\r\n                <option value=\"2\">Matrícula</option>\r\n                <option value=\"3\">Nome do Condutor</option>\r\n                <option value=\"4\">Endereço</option>\r\n              </select>\r\n              </div>\r\n                 <div>\r\n    <label hidden={this.state.showRaio}>\r\n    <FormControl aria-describedby=\"basic-addon1\"ref={this.textRaio}type=\"number\" min=\"0\" placeholder=\"Raio de Busca\"/>\r\n    </label>\r\n    </div>\r\n              <div class=\"input-group-append\" style={{width: `600px`}}>\r\n                <FormControl aria-describedby=\"basic-addon1\" ref={this.textInput} placeholder=\"Conteúdo para consulta\"/>\r\n                <Button onClick={this.handleShow} variant=\"info\" hidden={this.state.showSearchName} >Selecionar</Button>\r\n                <Button onClick={this.toggleButtonState} variant=\"primary\">Buscar</Button>\r\n              </div>\r\n            </div>\r\n          </InputGroup>\r\n        </div>\r\n\r\n        <div>\r\n       \r\n          <Map\r\n            google={this.props.google}\r\n            zoom={15}\r\n            style={mapStyles}\r\n            initialCenter={{\r\n              lat: this.state.posx.result,\r\n              lng: this.state.posy.result}}\r\n            center={{\r\n                lat: this.state.posx.result,\r\n                lng: this.state.posy.result}}\r\n          >\r\n              \r\n            {markers}\r\n        \r\n            <InfoWindow\r\n              marker={this.state.activeMarker}\r\n              visible={this.state.showingInfoWindow}>\r\n                <div>\r\n                  <h4>{this.state.placa.result}</h4>\r\n                  <h5>{this.state.address.result}</h5>\r\n                  <h6>Data da Última Comunicação: {Moment(this.state.hour.result).format('LLL') }</h6>\r\n                </div>\r\n            </InfoWindow>        \r\n          </Map>        \r\n  \r\n          <Modal show={this.state.isOpen} onHide={this.handleClose}>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Condutore(s)</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <div>\r\n                <React.Fragment>\r\n                  <ul className=\"list-group\">\r\n                    {this.state.drivers.map(driver => (\r\n                      <li className=\"list-group-item list-group-item-default\" onClick={() => this.displayDriver('3', driver.driverName)}>\r\n                        {driver.driverName} \r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </React.Fragment>              \r\n              </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                Fechar\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>          \r\n        </div>\r\n        }\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nclass GetEndpoint extends Component {\r\n\r\n  static async getToken() { \r\n    let json = null;\r\n    \r\n    await axios.post(appSettings.AppSettings.restUrl + \"Token/Get\", {\r\n      user: appSettings.AppSettings.user,\r\n      password: appSettings.AppSettings.password,\r\n    }, \r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n        json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n  };\r\n\r\n   static getDrivers = async (name) => {\r\n\r\n     let json = null;\r\n\r\n     let url = appSettings.AppSettings.restUrl + \"Position/GetDriversName\";\r\n\r\n     await axios.post(url + '?name=' + name,\r\n     {\r\n       headers: {\r\n         'Accept': 'application/json',\r\n         'Content-Type': 'application/json',\r\n       },\r\n       }).then(response => {\r\n         json = response;\r\n       }).catch(error => {\r\n         console.log(error.response);\r\n       try {\r\n         json = error.response;\r\n       } catch {\r\n        json = null\r\n       }\r\n     });\r\n     return json != null ? json.data : null;\r\n   };   \r\n  \r\n  //  static getAddress = async (value, raio) => {\r\n\r\n  //   let json = null;\r\n\r\n  //   let url = appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\r\n\r\n  //   await axios.post(url + '?name=' + name,\r\n  //   {\r\n  //     headers: {\r\n  //       'Accept': 'application/json',\r\n  //       'Content-Type': 'application/json',\r\n  //     },\r\n  //     }).then(response => {\r\n  //       json = response;\r\n  //     }).catch(error => {\r\n  //       console.log(error.response);\r\n  //     try {\r\n  //       json = error.response;\r\n  //     } catch {\r\n  //      json = null\r\n  //     }\r\n  //   });\r\n  //   return json != null ? json.data : null;\r\n  // };   \r\n\r\n  static getPosition = async (option, search, raio) => {\r\n  \r\n    let json = null;\r\n\r\n    let url = \"\";\r\n\r\n    switch(option) {\r\n      case '1':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusLight\";\r\n        break;\r\n      case '2':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByNationalId\";\r\n        break;\r\n      case '3':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByDriverName\";\r\n        break;\r\n      case '4':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\r\n        break;\r\n    }\r\n\r\n    await axios.post(url, {\r\n           TokenId: \"\",\r\n           InputData: [search],\r\n           RaioData: [raio]\r\n         },\r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response;\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n       json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n   };\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: appSettings.AppSettings.apiKey\r\n})(MapContainer);\r\n\r\n"]},"metadata":{},"sourceType":"module"}