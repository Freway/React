{"ast":null,"code":"var _jsxFileName = \"C:\\\\Sandbox_Monteiro\\\\Nova pasta\\\\connect-light\\\\src\\\\App.js\";\nimport React, { Component, props } from 'react';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react';\nimport ReactDOM from \"react-dom\";\nimport axios from 'axios';\nimport { Button, FormControl, InputGroup, ListGroup, Alert } from 'react-bootstrap';\nimport * as appSettings from './AppSettings.json';\nimport Moment from 'moment';\nimport 'moment/locale/pt-br';\nimport { Modal } from 'react-bootstrap';\nconst formStyles = {\n  width: '50%',\n  height: '50%',\n  margin: '2% 0% 1% 10%'\n};\nconst headerStyles = {\n  color: '#3399ff',\n  margin: '2% 0% 1% 32%'\n};\nconst mapStyles = {\n  width: '80%',\n  height: '60%',\n  top: '1%',\n  left: '10%',\n  border: '3px solid #3399ff'\n};\nexport class MapContainer extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.toggleButtonState = () => {\n      if (this.optionText.current.value < 1) {\n        alert('Selecione uma opção');\n        return;\n      }\n\n      if (this.textInput.current.value.trim() === '') {\n        alert('Insira uma informação para consulta');\n        this.textInput.current.value = '';\n        return;\n      }\n\n      this.doPositioning(this.optionText.current.value, this.textInput.current.value);\n    };\n\n    this.displayDriver = (option, value) => {\n      this.doPositioning(option, value);\n      this.textInput.current.value = value;\n      this.handleClose();\n    };\n\n    this.displayAddress = (option, value) => {\n      this.doPositioning(option, value);\n      this.textInput.current.value = value;\n      this.handleClose();\n    };\n\n    this.doPositioning = (option, value) => {\n      const promisse = GetEndpoint.getPosition(option, value).then(response => {\n        if (response == null) {\n          alert(\"Não foi possível realizar a pesquisa.\");\n          return;\n        }\n\n        if (response.success && response.data.length > 0) {\n          //for(let  i = 0;i < getAddress.length;i++){\n          fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + response.data[0].lat + ',' + response.data[0].long + '&key=' + appSettings.AppSettings.apiKey).then(response => response.json()).then(responseJson => {\n            const address1 = responseJson.results[0].formatted_address;\n            this.setState({\n              posx: {\n                result: response.data[0].lat\n              },\n              posy: {\n                result: response.data[0].long\n              },\n              placa: {\n                result: response.data[0].licencePlate\n              },\n              hour: {\n                result: response.data[0].rowReferenceTime\n              },\n              address: {\n                result: response.data[0].Address\n              }\n            });\n          });\n        } else {\n          alert('Informação não encontrada!');\n        }\n      });\n    };\n\n    this.optionChange = () => {\n      this.setState({\n        showSearchName: this.optionText.current.value != 3\n      });\n      this.setState({\n        showRaio: this.optionText.current.value != 4\n      });\n    };\n\n    this.onMarkerClick = (props, marker, e) => {\n      this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true\n      });\n    };\n\n    this.handleClose = () => this.setState({\n      isOpen: false\n    });\n\n    this.handleShow = () => {\n      const promisse = GetEndpoint.getDrivers(this.textInput.current.value).then(response => {\n        if (response == null) {\n          alert(\"Não foi possível realizar a pesquisa.\");\n          return;\n        }\n\n        if (response.success && response.data.length > 0) {\n          this.setState({\n            isOpen: true,\n            drivers: response.data\n          });\n        } else {\n          alert('Informação não encontrada!');\n        }\n      });\n    };\n\n    this.handleShow = () => {\n      const promisse = GetEndpoint.getAddress(this.textInput.current.value).then(response => {\n        if (response == null) {\n          alert(\"Não foi possível realizar a pesquisa.\");\n          return;\n        }\n\n        if (response.success && response.data.length > 0) {\n          this.setState({\n            isOpen: true,\n            addressProp: response.data\n          });\n        } else {\n          alert('Informação não encontrada!');\n        }\n      });\n    };\n\n    this.textInput = React.createRef();\n    this.optionText = React.createRef();\n    this.toggleButtonState = this.toggleButtonState.bind(this);\n    this.state = {\n      posx: {\n        result: -23.4991613\n      },\n      posy: {\n        result: -46.8533796\n      },\n      placa: {\n        result: \"\"\n      },\n      hour: {\n        result: \"\"\n      },\n      address: \"\",\n      selectedPlace: null,\n      activeMarker: null,\n      showingInfoWindow: true,\n      showSearchName: true,\n      isOpen: false,\n      drivers: [],\n      showRaio: true,\n      addressProp: []\n    };\n  }\n\n  render() {\n    Moment.locale('pt-BR');\n    return React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      style: headerStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Connect Light - Visualizador de Frota\"), React.createElement(\"div\", {\n      style: formStyles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      className: \"mb-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      class: \"custom-select\",\n      id: \"inputGroupSelect04\",\n      ref: this.optionText,\n      onChange: this.optionChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      selected: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Selecione a op\\xE7\\xE3o...\"), React.createElement(\"option\", {\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Placa do Ve\\xEDculo\"), React.createElement(\"option\", {\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Matr\\xEDcula\"), React.createElement(\"option\", {\n      value: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Nome do Condutor\"), React.createElement(\"option\", {\n      value: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Endere\\xE7o\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      hidden: this.state.showRaio,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      \"aria-describedby\": \"basic-addon1\",\n      ref: this.textRaio,\n      type: \"number\",\n      min: \"0\",\n      placeholder: \"Raio de Busca\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"input-group-append\",\n      style: {\n        width: \"600px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      \"aria-describedby\": \"basic-addon1\",\n      ref: this.textInput,\n      placeholder: \"Conte\\xFAdo para consulta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: this.handleShow,\n      variant: \"info\",\n      hidden: this.state.showSearchName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Selecionar\"), React.createElement(Button, {\n      onClick: this.toggleButtonState,\n      variant: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Buscar\"))))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Map, {\n      google: this.props.google,\n      zoom: 15,\n      style: mapStyles,\n      initialCenter: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      center: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(Marker, {\n      position: {\n        lat: this.state.posx.result,\n        lng: this.state.posy.result\n      },\n      onClick: this.onMarkerClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(InfoWindow, {\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, this.state.placa.result), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, this.state.address.result), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \"Data da \\xDAltima Comunica\\xE7\\xE3o: \", Moment(this.state.hour.result).format('LLL'))))), React.createElement(Modal, {\n      show: this.state.isOpen,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Endreco(s)\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"list-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, this.state.addressProp.map(address => React.createElement(\"li\", {\n      className: \"list-group-item list-group-item-default\",\n      onClick: () => this.displayAddress('4', address.Address),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, address.Address)))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"Fechar\"))), React.createElement(Modal, {\n      show: this.state.isOpen,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, \"Condutore(s)\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"list-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, this.state.drivers.map(driver => React.createElement(\"li\", {\n      className: \"list-group-item list-group-item-default\",\n      onClick: () => this.displayDriver('3', driver.driverName),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, driver.driverName)))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, \"Fechar\")))), \"}\");\n  }\n\n}\n\nclass GetEndpoint extends Component {\n  static async getToken() {\n    let json = null;\n    await axios.post(appSettings.AppSettings.restUrl + \"Token/Get\", {\n      user: appSettings.AppSettings.user,\n      password: appSettings.AppSettings.password\n    }, {\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      json = response;\n    }).catch(error => {\n      console.log(error.response);\n\n      try {\n        json = error.response;\n      } catch {\n        json = null;\n      }\n    });\n    return json != null ? json.data : null;\n  }\n\n}\n\nGetEndpoint.getDrivers = async name => {\n  let json = null;\n  let url = appSettings.AppSettings.restUrl + \"Position/GetDriversName\";\n  await axios.post(url + '?name=' + name, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null;\n};\n\nGetEndpoint.getAddress = async address => {\n  let json = null;\n  let url = appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\n  await axios.post(url + '?address=' + address, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null;\n};\n\nGetEndpoint.getPosition = async (option, search) => {\n  let json = null;\n  let url = \"\";\n\n  switch (option) {\n    case '1':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusLight\";\n      break;\n\n    case '2':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByNationalId\";\n      break;\n\n    case '3':\n      url = appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByDriverName\";\n      break;\n\n    case '4':\n      url = appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\n      break;\n  } // await fetch('https://connect-light.herokuapp.com/' + url, {\n  //   mode: 'cors',\n  //   method: 'OPTIONS',      \n  //   body: JSON.stringify({\n  //          TokenId: \"\",\n  //          InputData: [search],\n  //        }),\n  //   headers: {\n  //     'Accept': 'application/json, text/plain, */*',\n  //     \"Content-Type\": \"application/json\",\n  //     'Access-Control-Allow-Headers': 'Cache-Control, Origin, Authorization, Content-Type, X-Requested-With',\n  //     'Access-Control-Allow-Methods': 'GET, PUT, POST, OPTIONS',\n  //     'Access-Control-Max-Age': '120',\n  //     'Origin': 'https://connect-light.herokuapp.com/'\n  //   }\n  // }).then((resp) => resp.json()) \n  // .then(function(data) {\n  //   alert('data: ' + data.results);\n  // });\n\n\n  await axios.post(url, {\n    TokenId: \"\",\n    InputData: [search]\n  }, {\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    json = response;\n  }).catch(error => {\n    console.log(error.response);\n\n    try {\n      json = error.response;\n    } catch {\n      json = null;\n    }\n  });\n  return json != null ? json.data : null; //   await axios( url, {\n  //     TokenId: \"\",\n  //     InputData: [search],\n  //   }, \n  //   {\n  //     headers: {\n  //       'Accept': 'application/json, text/plain, */*',\n  //       \"Content-Type\": \"application/json\",\n  //       //'Access-Control-Allow-Headers': 'Cache-Control, Origin, Authorization, Content-Type, X-Requested-With',\n  //       //'Access-Control-Allow-Methods': 'POST',\n  //       //'Access-Control-Max-Age': '120',\n  //       //'Access-Control-Allow-Origin': '*',\n  //       //'Origin': 'http://localhost:3000/'\n  // },\n  //     //method: 'POST'\n  //     }).then(response => {\n  //       json = response;\n  //     }).catch(error => {\n  //       if (error.response) {\n  //         console.log(error.response);\n  //       }        \n  //       try {\n  //         json = error.response;\n  //       } catch {\n  //         json = null\n  //       }\n  //   });\n  //    return json != null ? json.data : null;\n};\n\nexport default GoogleApiWrapper({\n  apiKey: appSettings.AppSettings.apiKey\n})(MapContainer);","map":{"version":3,"sources":["C:\\Sandbox_Monteiro\\Nova pasta\\connect-light\\src\\App.js"],"names":["React","Component","props","Map","GoogleApiWrapper","Marker","InfoWindow","ReactDOM","axios","Button","FormControl","InputGroup","ListGroup","Alert","appSettings","Moment","Modal","formStyles","width","height","margin","headerStyles","color","mapStyles","top","left","border","MapContainer","constructor","toggleButtonState","optionText","current","value","alert","textInput","trim","doPositioning","displayDriver","option","handleClose","displayAddress","promisse","GetEndpoint","getPosition","then","response","success","data","length","fetch","lat","long","AppSettings","apiKey","json","responseJson","address1","results","formatted_address","setState","posx","result","posy","placa","licencePlate","hour","rowReferenceTime","address","Address","optionChange","showSearchName","showRaio","onMarkerClick","marker","e","selectedPlace","activeMarker","showingInfoWindow","isOpen","handleShow","getDrivers","drivers","getAddress","addressProp","createRef","bind","state","render","locale","textRaio","google","lng","format","map","driver","driverName","getToken","post","restUrl","user","password","headers","catch","error","console","log","name","url","search","TokenId","InputData"],"mappings":"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","sourcesContent":["import React, { Component, props } from 'react';\r\nimport { Map, GoogleApiWrapper, Marker, InfoWindow} from 'google-maps-react';\r\nimport ReactDOM from \"react-dom\";\r\nimport axios from 'axios';\r\nimport { Button , FormControl, InputGroup, ListGroup, Alert} from 'react-bootstrap';\r\nimport * as appSettings from './AppSettings.json';\r\nimport Moment from 'moment';\r\nimport 'moment/locale/pt-br'\r\nimport { Modal } from 'react-bootstrap';\r\n\r\nconst formStyles  ={\r\n  width: '50%',\r\n  height: '50%',\r\n  margin: '2% 0% 1% 10%'\r\n}\r\n\r\nconst headerStyles  ={\r\n  color: '#3399ff',\r\n  margin: '2% 0% 1% 32%'\r\n}\r\n\r\nconst mapStyles = {\r\n  width: '80%',\r\n  height: '60%',\r\n  top: '1%',\r\n  left: '10%',\r\n  border: '3px solid #3399ff'\r\n};\r\n\r\nexport class MapContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);  \r\n    this.textInput = React.createRef(); \r\n    this.optionText = React.createRef();\r\n    this.toggleButtonState = this.toggleButtonState.bind(this);\r\n    this.state = {  posx : { result: -23.4991613},\r\n                    posy : { result: -46.8533796},\r\n                    placa : { result : \"\"},\r\n                    hour : { result : \"\"},\r\n                    address : \"\",\r\n                    selectedPlace: null,\r\n                    activeMarker: null,\r\n                    showingInfoWindow: true,\r\n                    showSearchName: true,\r\n                    isOpen: false,\r\n                    drivers: [],\r\n                    showRaio: true,\r\n                    addressProp: []\r\n                  }\r\n  }\r\n\r\n  toggleButtonState = () => {\r\n\r\n    if(this.optionText.current.value < 1){\r\n      alert('Selecione uma opção');\r\n      return;\r\n    }\r\n\r\n    if(this.textInput.current.value.trim() === ''){\r\n      alert('Insira uma informação para consulta');\r\n      this.textInput.current.value = '';\r\n      return;\r\n    }\r\n\r\n    this.doPositioning(this.optionText.current.value, this.textInput.current.value);\r\n  };  \r\n\r\n  displayDriver = (option, value) => {\r\n    this.doPositioning(option, value);\r\n    this.textInput.current.value = value;\r\n\r\n    this.handleClose();\r\n  }\r\n\r\n  displayAddress = (option, value) => {\r\n    this.doPositioning(option, value);\r\n    this.textInput.current.value = value;\r\n\r\n    this.handleClose();\r\n  }\r\n\r\n  doPositioning = (option, value) => {\r\n\r\n    const promisse = GetEndpoint.getPosition(option, value).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n      if(response.success && response.data.length > 0){\r\n        //for(let  i = 0;i < getAddress.length;i++){\r\n        fetch('https://maps.googleapis.com/maps/api/geocode/json?address=' + response.data[0].lat + ',' + response.data[0].long + '&key=' + appSettings.AppSettings.apiKey)\r\n          .then((response) => response.json())\r\n          .then((responseJson) => {\r\n            const address1 = responseJson.results[0].formatted_address;\r\n              this.setState({\r\n                posx : { result: response.data[0].lat},\r\n                posy : { result: response.data[0].long},\r\n                placa : { result: response.data[0].licencePlate},\r\n                hour: { result: response.data[0].rowReferenceTime},\r\n                address : { result: response.data[0].Address}\r\n              })\r\n      \r\n        })\r\n      }\r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    });\r\n  }\r\n\r\n  optionChange = () => {\r\n    this.setState({\r\n      showSearchName: this.optionText.current.value != 3\r\n    });\r\n \r\n    this.setState({\r\n      showRaio: this.optionText.current.value != 4\r\n    });\r\n\r\n  }\r\n\r\n  onMarkerClick = (props, marker, e) => {\r\n    this.setState({\r\n      selectedPlace: props,\r\n      activeMarker: marker,\r\n      showingInfoWindow: true\r\n    });\r\n  };\r\n\r\n  handleClose = () => this.setState({\r\n    isOpen: false\r\n  });\r\n\r\n  handleShow = () => {\r\n    const promisse = GetEndpoint.getDrivers(this.textInput.current.value).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n      if(response.success && response.data.length > 0){\r\n        this.setState({\r\n          isOpen: true,\r\n          drivers: response.data\r\n        });\r\n    \r\n      }\r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    });    \r\n  }\r\n\r\n  handleShow = () => {\r\n    const promisse = GetEndpoint.getAddress(this.textInput.current.value).then( response => {\r\n      if(response == null){\r\n        alert(\"Não foi possível realizar a pesquisa.\");\r\n        return;\r\n      }\r\n\r\n      if(response.success && response.data.length > 0){\r\n        this.setState({\r\n          isOpen: true,\r\n          addressProp: response.data\r\n        });\r\n    \r\n      }\r\n      else{\r\n        alert('Informação não encontrada!')\r\n      }\r\n    });    \r\n  }\r\n\r\n  render() {\r\n    Moment.locale('pt-BR');\r\n\r\n    return (\r\n      <form>\r\n        <h2 style={headerStyles}>Connect Light - Visualizador de Frota</h2>\r\n\r\n        <div style={formStyles}>\r\n          <InputGroup className=\"mb-6\">\r\n            <div class=\"input-group\">\r\n              <div  style={{width: `200px`}}>\r\n              <select class=\"custom-select\" id=\"inputGroupSelect04\" ref={this.optionText} onChange={this.optionChange} >\r\n                <option value=\"0\" selected>Selecione a opção...</option>\r\n                <option value=\"1\">Placa do Veículo</option>\r\n                <option value=\"2\">Matrícula</option>\r\n                <option value=\"3\">Nome do Condutor</option>\r\n                <option value=\"4\">Endereço</option>\r\n              </select>\r\n              </div>\r\n                 <div>\r\n    <label hidden={this.state.showRaio}>\r\n    <FormControl aria-describedby=\"basic-addon1\"ref={this.textRaio}type=\"number\" min=\"0\" placeholder=\"Raio de Busca\"/>\r\n    </label>\r\n    </div>\r\n    \r\n    \r\n              <div class=\"input-group-append\" style={{width: `600px`}}>\r\n                <FormControl aria-describedby=\"basic-addon1\" ref={this.textInput} placeholder=\"Conteúdo para consulta\"/>\r\n                <Button onClick={this.handleShow} variant=\"info\" hidden={this.state.showSearchName} >Selecionar</Button>\r\n                <Button onClick={this.toggleButtonState} variant=\"primary\">Buscar</Button>\r\n              </div>\r\n            </div>\r\n          </InputGroup>\r\n        </div>\r\n        \r\n        <div>\r\n       \r\n          <Map\r\n            google={this.props.google}\r\n            zoom={15}\r\n            style={mapStyles}\r\n            initialCenter={{\r\n              lat: this.state.posx.result,\r\n              lng: this.state.posy.result}}\r\n            center={{\r\n                lat: this.state.posx.result,\r\n                lng: this.state.posy.result}}\r\n                >\r\n              \r\n            <Marker position={{ lat: this.state.posx.result, lng: this.state.posy.result}} onClick={this.onMarkerClick}/>\r\n\r\n        \r\n            <InfoWindow\r\n              marker={this.state.activeMarker}\r\n              visible={this.state.showingInfoWindow}>\r\n                <div>\r\n                  <h4>{this.state.placa.result}</h4>\r\n                  <h5>{this.state.address.result}</h5>\r\n                  <h6>Data da Última Comunicação: {Moment(this.state.hour.result).format('LLL') }</h6>\r\n                </div>\r\n\r\n            </InfoWindow>        \r\n          </Map>\r\n        \r\n          <Modal show={this.state.isOpen} onHide={this.handleClose}>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Endreco(s)</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <div>\r\n                <React.Fragment>\r\n                  <ul className=\"list-group\">\r\n                    {this.state.addressProp.map(address => (\r\n                      <li className=\"list-group-item list-group-item-default\" onClick={() => this.displayAddress('4', address.Address)}>\r\n                        {address.Address} \r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </React.Fragment>              \r\n              </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                Fechar\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal> \r\n\r\n          <Modal show={this.state.isOpen} onHide={this.handleClose}>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Condutore(s)</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <div>\r\n                <React.Fragment>\r\n                  <ul className=\"list-group\">\r\n                    {this.state.drivers.map(driver => (\r\n                      <li className=\"list-group-item list-group-item-default\" onClick={() => this.displayDriver('3', driver.driverName)}>\r\n                        {driver.driverName} \r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </React.Fragment>              \r\n              </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                Fechar\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>          \r\n        </div>\r\n        }\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nclass GetEndpoint extends Component {\r\n\r\n  static async getToken() { \r\n    let json = null;\r\n    \r\n    await axios.post(appSettings.AppSettings.restUrl + \"Token/Get\", {\r\n      user: appSettings.AppSettings.user,\r\n      password: appSettings.AppSettings.password,\r\n    }, \r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n        json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n  };\r\n\r\n   static getDrivers = async (name) => {\r\n\r\n     let json = null;\r\n\r\n     let url = appSettings.AppSettings.restUrl + \"Position/GetDriversName\";\r\n\r\n     await axios.post(url + '?name=' + name,\r\n     {\r\n       headers: {\r\n         'Accept': 'application/json',\r\n         'Content-Type': 'application/json',\r\n       },\r\n       }).then(response => {\r\n         json = response;\r\n       }).catch(error => {\r\n         console.log(error.response);\r\n       try {\r\n         json = error.response;\r\n       } catch {\r\n        json = null\r\n       }\r\n     });\r\n     return json != null ? json.data : null;\r\n   };\r\n\r\n   static getAddress = async (address) => {\r\n\r\n    let json = null;\r\n\r\n    let url = appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\r\n\r\n    await axios.post(url + '?address=' + address,\r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response;\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n       json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n  };\r\n\r\n  static getPosition = async (option, search) => {\r\n\r\n    let json = null;\r\n\r\n    let url = \"\";\r\n\r\n    switch(option) {\r\n      case '1':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusLight\";\r\n        break;\r\n      case '2':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByNationalId\";\r\n        break;\r\n      case '3':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetVehicleStatusByDriverName\";\r\n        break;\r\n      case '4':\r\n        url =  appSettings.AppSettings.restUrl + \"Position/GetAddressbyRadius\";\r\n        break;\r\n    }\r\n\r\n    // await fetch('https://connect-light.herokuapp.com/' + url, {\r\n    //   mode: 'cors',\r\n    //   method: 'OPTIONS',      \r\n    //   body: JSON.stringify({\r\n    //          TokenId: \"\",\r\n    //          InputData: [search],\r\n    //        }),\r\n    //   headers: {\r\n    //     'Accept': 'application/json, text/plain, */*',\r\n    //     \"Content-Type\": \"application/json\",\r\n    //     'Access-Control-Allow-Headers': 'Cache-Control, Origin, Authorization, Content-Type, X-Requested-With',\r\n    //     'Access-Control-Allow-Methods': 'GET, PUT, POST, OPTIONS',\r\n    //     'Access-Control-Max-Age': '120',\r\n    //     'Origin': 'https://connect-light.herokuapp.com/'\r\n\r\n    //   }\r\n    // }).then((resp) => resp.json()) \r\n    // .then(function(data) {\r\n    //   alert('data: ' + data.results);\r\n    // });\r\n\r\n    await axios.post(url, {\r\n           TokenId: \"\",\r\n           InputData: [search],\r\n         },\r\n    {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      }).then(response => {\r\n        json = response;\r\n      }).catch(error => {\r\n        console.log(error.response);\r\n      try {\r\n        json = error.response;\r\n      } catch {\r\n       json = null\r\n      }\r\n    });\r\n    return json != null ? json.data : null;\r\n    \r\n\r\n  //   await axios( url, {\r\n  //     TokenId: \"\",\r\n  //     InputData: [search],\r\n  //   }, \r\n  //   {\r\n  //     headers: {\r\n  //       'Accept': 'application/json, text/plain, */*',\r\n  //       \"Content-Type\": \"application/json\",\r\n  //       //'Access-Control-Allow-Headers': 'Cache-Control, Origin, Authorization, Content-Type, X-Requested-With',\r\n  //       //'Access-Control-Allow-Methods': 'POST',\r\n  //       //'Access-Control-Max-Age': '120',\r\n  //       //'Access-Control-Allow-Origin': '*',\r\n  //       //'Origin': 'http://localhost:3000/'\r\n  // },\r\n  //     //method: 'POST'\r\n  //     }).then(response => {\r\n  //       json = response;\r\n  //     }).catch(error => {\r\n  //       if (error.response) {\r\n  //         console.log(error.response);\r\n  //       }        \r\n  //       try {\r\n  //         json = error.response;\r\n  //       } catch {\r\n  //         json = null\r\n  //       }\r\n  //   });\r\n  //    return json != null ? json.data : null;\r\n   };\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: appSettings.AppSettings.apiKey\r\n})(MapContainer);\r\n\r\n"]},"metadata":{},"sourceType":"module"}