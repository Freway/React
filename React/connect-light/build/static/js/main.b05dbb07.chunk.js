(window["webpackJsonpfleetlight.website"]=window["webpackJsonpfleetlight.website"]||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"a":{"restUrl":"http://104.214.115.47/LastPositionAPI/api/","user":"Ti","password":"Ti_2013","apiKey":"AIzaSyCccJxCtZhZrYIKjh6pDEzfIrm9e3fj0bk"}}')},118:function(e,t,a){"use strict";a.r(t);a(57);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),l=(a(62),a(13)),i=a.n(l),c=a(22),u=a(29),p=a(30),h=a(32),d=a(31),m=a(20),f=a(33),v=a(19),g=a(23),w=a.n(g),y=a(120),b=a(123),E=a(122),k=a(11),x=a(21),C=a.n(x),j=(a(97),a(121)),S={width:"50%",height:"50%",margin:"2% 0% 1% 10%"},I={color:"#3399ff",margin:"2% 0% 1% 32%"},O={width:"80%",height:"60%",top:"1%",left:"10%",border:"3px solid #3399ff"},N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).toggleButtonState=function(){if(!(a.optionText.current.value<1))return""===a.textInput.current.value.trim()?(alert("Insira uma informa\xe7\xe3o para consulta"),void(a.textInput.current.value="")):void a.doPositioning(a.optionText.current.value,a.textInput.current.value);alert("Selecione uma op\xe7\xe3o")},a.displayDriver=function(e,t){a.doPositioning(e,t),a.textInput.current.value=t,a.handleClose()},a.doPositioning=function(e,t){P.getPosition(e,t).then(function(e){null!=e?e.success&&e.data.length>0?fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+e.data[0].lat+","+e.data[0].long+"&key="+k.a.apiKey).then(function(e){return e.json()}).then(function(t){var n=t.results[0].formatted_address;a.setState({posx:{result:e.data[0].lat},posy:{result:e.data[0].long},placa:{result:e.data[0].licencePlate},hour:{result:e.data[0].rowReferenceTime},address:{result:n}})}):alert("Informa\xe7\xe3o n\xe3o encontrada!"):alert("N\xe3o foi poss\xedvel realizar a pesquisa.")})},a.optionChange=function(){3==a.optionText.current.value?a.setState({showSearchName:!1}):a.setState({showSearchName:!0})},a.onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.handleClose=function(){return a.setState({isOpen:!1})},a.handleShow=function(){P.getDrivers(a.textInput.current.value).then(function(e){null!=e?e.success&&e.data.length>0?a.setState({isOpen:!0,drivers:e.data}):alert("Informa\xe7\xe3o n\xe3o encontrada!"):alert("N\xe3o foi poss\xedvel realizar a pesquisa.")})},a.textInput=r.a.createRef(),a.optionText=r.a.createRef(),a.toggleButtonState=a.toggleButtonState.bind(Object(m.a)(a)),a.state={posx:{result:-23.4991613},posy:{result:-46.8533796},placa:{result:""},hour:{result:""},address:"",selectedPlace:null,activeMarker:null,showingInfoWindow:!0,showSearchName:!0,isOpen:!1,drivers:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return C.a.locale("pt-BR"),r.a.createElement("form",null,r.a.createElement("h2",{style:I},"Connect Light - Visualizador de Frota"),r.a.createElement("div",{style:S},r.a.createElement(y.a,{className:"mb-6"},r.a.createElement("div",{class:"input-group"},r.a.createElement("div",{style:{width:"200px"}},r.a.createElement("select",{class:"custom-select",id:"inputGroupSelect04",ref:this.optionText,onChange:this.optionChange},r.a.createElement("option",{value:"0",selected:!0},"Selecione a op\xe7\xe3o..."),r.a.createElement("option",{value:"1"},"Placa do Ve\xedculo"),r.a.createElement("option",{value:"2"},"Matr\xedcula"),r.a.createElement("option",{value:"3"},"Nome do Condutor"))),r.a.createElement("div",{class:"input-group-append",style:{width:"600px"}},r.a.createElement(b.a,{"aria-describedby":"basic-addon1",ref:this.textInput,placeholder:"Conte\xfado para consulta"}),r.a.createElement(E.a,{onClick:this.handleShow,variant:"info",hidden:this.state.showSearchName},"Selecionar"),r.a.createElement(E.a,{onClick:this.toggleButtonState,variant:"primary"},"Buscar"))))),r.a.createElement("div",null,r.a.createElement(v.Map,{google:this.props.google,zoom:15,style:O,initialCenter:{lat:this.state.posx.result,lng:this.state.posy.result},center:{lat:this.state.posx.result,lng:this.state.posy.result}},r.a.createElement(v.Marker,{position:{lat:this.state.posx.result,lng:this.state.posy.result},onClick:this.onMarkerClick}),r.a.createElement(v.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,r.a.createElement("h4",null,this.state.placa.result),r.a.createElement("h5",null,this.state.address.result),r.a.createElement("h6",null,"Data da \xdaltima Comunica\xe7\xe3o: ",C()(this.state.hour.result).format("LLL"))))),r.a.createElement(j.a,{show:this.state.isOpen,onHide:this.handleClose},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Condutore(s)")),r.a.createElement(j.a.Body,null,r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"list-group"},this.state.drivers.map(function(t){return r.a.createElement("li",{className:"list-group-item list-group-item-default",onClick:function(){return e.displayDriver("3",t.driverName)}},t.driverName)}))))),r.a.createElement(j.a.Footer,null,r.a.createElement(E.a,{variant:"secondary",onClick:this.handleClose},"Fechar")))))}}]),t}(n.Component),P=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"getToken",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,w.a.post(k.a.restUrl+"Token/Get",{user:k.a.user,password:k.a.password},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){t=e}).catch(function(e){console.log(e.response);try{t=e.response}catch(a){t=null}});case 3:return e.abrupt("return",null!=t?t.data:null);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component);P.getDrivers=function(){var e=Object(c.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,n=k.a.restUrl+"Position/GetDriversName",e.next=4,w.a.post(n+"?name="+t,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){a=e}).catch(function(e){console.log(e.response);try{a=e.response}catch(t){a=null}});case 4:return e.abrupt("return",null!=a?a.data:null);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),P.getPosition=function(){var e=Object(c.a)(i.a.mark(function e(t,a){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r="",e.t0=t,e.next="1"===e.t0?5:"2"===e.t0?7:"3"===e.t0?9:11;break;case 5:return r=k.a.restUrl+"Position/GetVehicleStatusLight",e.abrupt("break",11);case 7:return r=k.a.restUrl+"Position/GetVehicleStatusByNationalId",e.abrupt("break",11);case 9:return r=k.a.restUrl+"Position/GetVehicleStatusByDriverName",e.abrupt("break",11);case 11:return e.next=13,w.a.post(r,{TokenId:"",InputData:[a]},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){n=e}).catch(function(e){console.log(e.response);try{n=e.response}catch(t){n=null}});case 13:return e.abrupt("return",null!=n?n.data:null);case 14:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();var T=Object(v.GoogleApiWrapper)({apiKey:k.a.apiKey})(N);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},56:function(e,t,a){e.exports=a(118)},62:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.b05dbb07.chunk.js.map